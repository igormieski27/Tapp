<mat-card *ngIf="!prePartida">
  <!-- <div class="menu-top">
    <div style="display: flex; flex-direction: column">
      <mat-icon style="width: 100px; height: 100px">save</mat-icon>
      <span>Salvar Jogo</span>
    </div>
    <div></div>
    <div></div>
  </div> -->
  <div class="info-team">
    <div style="display: flex; flex-direction: row; margin-top: 20px">
      <img class="escudo-time" [src]="urlEscudo" />
      <div style="display: flex; flex-direction: column; margin-top: 7px">
        <span style="font-weight: 500; font-size: 20px">{{
          timeSelecionado.nomeTime
        }}</span>
        <span>Técnico: {{ treinador }}</span>
      </div>
    </div>
    <div class="next-game">
      <span style="font-weight: 500">Próximo Jogo:</span>
      <div style="display: flex; flex-direction: column; margin: auto">
        <div style="display: flex; flex-direction: row; margin: auto">
          <div style="display: flex; flex-direction: column">
            <img
              [src]="getTeamImageUrl(proximoJogo.timeCasa)"
              style="width: 100px"
            />
            <span style="text-align: center">{{ proximoJogo.timeCasa }}</span>
          </div>

          <span style="font-size: 20px; margin: auto 25px auto 25px">X</span>
          <div style="display: flex; flex-direction: column">
            <img
              [src]="getTeamImageUrl(proximoJogo.timeFora)"
              style="width: 100px"
            />
            <span style="text-align: center">{{ proximoJogo.timeFora }}</span>
          </div>
        </div>
        <!-- <span style="margin: 5px"
          >Estádio: {{ proximoJogo.timeCasa.estadio }}</span
        > -->
      </div>
    </div>
    <button
      style="width: 450px; margin-left: 20px"
      mat-raised-button
      color="accent"
      (click)="iniciarJogo()"
    >
      <mat-icon>settings</mat-icon>Escalar time
    </button>
  </div>

  <div class="table-container">
    <table
      mat-table
      [dataSource]="dataSource"
      matSort
      class="mat-elevation-z4"
      style="text-align: center; background-color: #1a1b26; color: white"
    >
      <!-- Position Column -->
      <ng-container matColumnDef="posicao">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          style="color: white"
        >
          Posição
        </th>
        <td mat-cell style="color: white" *matCellDef="let jogador">
          {{ jogador.posicao }}
        </td>
      </ng-container>

      <!-- Player Name Column -->
      <ng-container style="color: white" matColumnDef="nome">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          style="color: white"
        >
          Nome do Jogador
        </th>
        <td style="color: white" mat-cell *matCellDef="let jogador">
          {{ jogador.nome }}
        </td>
      </ng-container>

      <ng-container matColumnDef="pePreferido">
        <th
          style="color: white"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          Pé
        </th>
        <td style="color: white" mat-cell *matCellDef="let jogador">
          {{ jogador.pePreferido }}
        </td>
      </ng-container>

      <!-- Characteristics Column -->
      <ng-container matColumnDef="idade">
        <th
          style="color: white"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          Idade
        </th>
        <td style="color: white" mat-cell *matCellDef="let jogador">
          {{ jogador.idade }}
        </td>
      </ng-container>

      <!-- Value Column -->
      <ng-container matColumnDef="altura">
        <th
          style="color: white"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          Altura
        </th>
        <td style="color: white" mat-cell *matCellDef="let jogador">
          {{ jogador.altura }}
        </td>
      </ng-container>

      <!-- Goals Column -->
      <ng-container matColumnDef="valorDeMercado">
        <th
          style="color: white"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          Valor
        </th>
        <td style="color: white" mat-cell *matCellDef="let jogador">
          {{ jogador.valorDeMercado }}
        </td>
      </ng-container>

      <!-- Age Column -->
      <ng-container matColumnDef="forca">
        <th
          style="color: white"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          Forca
        </th>
        <td style="color: white" mat-cell *matCellDef="let jogador">
          {{ jogador.forca }}
        </td>
      </ng-container>

      <tr
        style="color: white"
        mat-header-row
        *matHeaderRowDef="displayedColumns; sticky: true"
      ></tr>
      <tr
        style="color: white"
        mat-row
        *matRowDef="let row; columns: displayedColumns"
      ></tr>
    </table>
  </div>

  <!-- <div class="summary-container">
    <p>Valor Total: {{ calcularValorTotalTime() }}</p>
    <p>Valor Médio: {{ calcularValorMedioTime() }}</p>
    <p>Força Média: {{ calcularForcaMediaTime() }}</p>
    <p>Total de Gols: {{ calcularTotalGolsElenco() }}</p>
  </div> -->
</mat-card>

<mat-card style="background-color: #1a1b26; color: white" *ngIf="prePartida">
  <h2>Escale seu time</h2>
  <div style="width: 50%; position: absolute; margin-top: 50px">
    <div
      style="
        display: flex;
        flex-direction: row;
        margin-left: auto;
        margin-right: auto;
        width: fit-content;
      "
    >
      <div style="display: flex; flex-direction: column">
        <img
          [src]="getTeamImageUrl(proximoJogo.timeCasa)"
          style="width: 100px"
        />
        <span style="text-align: center">{{ proximoJogo.timeCasa }}</span>
      </div>

      <span style="font-size: 20px; margin: auto 25px auto 25px">X</span>
      <div style="display: flex; flex-direction: column">
        <img
          [src]="getTeamImageUrl(proximoJogo.timeFora)"
          style="width: 100px"
        />
        <span style="text-align: center">{{ proximoJogo.timeFora }}</span>
      </div>
    </div>
    <span>Estilo de jogo:</span>
    <div style="display: flex; flex-direction: column">
      <mat-select style="width: 200px; margin: 15px" [(ngModel)]="taticaJogo">
        <mat-option *ngFor="let tatica of taticas" [value]="tatica">{{
          tatica
        }}</mat-option>
      </mat-select>
    </div>
  </div>
  <div
    style="
      width: 50%;
      height: 700px;
      overflow: auto;
      margin-left: auto;
      border: 1px solid;
      border-radius: 5px;
      padding-top: 10px;
    "
  >
    <span style="padding: 10px; font-size: 15px; font-weight: 500"
      >Jogadores</span
    >
    <table
      mat-table
      [dataSource]="jogadores"
      matSort
      class="mat-elevation-z4"
      style="text-align: center; margin-top: 15px"
    >
      <!-- Checkbox Column -->
      <ng-container matColumnDef="selecionado">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox (change)="toggleSelectAll()"></mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let jogador">
          <mat-checkbox [(ngModel)]="jogador.selecionado"></mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="posicao">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Posição</th>
        <td mat-cell *matCellDef="let jogador">{{ jogador.posicao }}</td>
      </ng-container>

      <!-- Player Name Column -->
      <ng-container matColumnDef="nome">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Nome do Jogador
        </th>
        <td mat-cell *matCellDef="let jogador">{{ jogador.nome }}</td>
      </ng-container>

      <ng-container matColumnDef="pePreferido">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Pé</th>
        <td mat-cell *matCellDef="let jogador">{{ jogador.pePreferido }}</td>
      </ng-container>

      <ng-container matColumnDef="forca">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Forca</th>
        <td mat-cell *matCellDef="let jogador">{{ jogador.forca }}</td>
      </ng-container>

      <tr
        mat-header-row
        *matHeaderRowDef="displayedColumnsPrePartida; sticky: true"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumnsPrePartida"
      ></tr>
    </table>
  </div>
  <button
    style="width: 50%; margin-left: auto; margin-top: 5px; margin-bottom: 5px"
    mat-raised-button
    color="primary"
    (click)="escalarTime(jogadores)"
  >
    <mat-icon>sync</mat-icon>Escalar Automaticamente
  </button>
  <button
    style="width: 50%; margin-left: auto; margin-top: 5px; margin-bottom: 5px"
    mat-raised-button
    color="accent"
    (click)="escalarTime(jogadores)"
  >
    <mat-icon>play_arrow</mat-icon>Iniciar Jogo
  </button>
</mat-card>
